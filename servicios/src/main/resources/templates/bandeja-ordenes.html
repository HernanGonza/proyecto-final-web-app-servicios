<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title >Bandeja de ordenes</title>
    <link rel="stylesheet" href="https://unpkg.com/bootstrap@5.3.3/dist/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">
<link rel="stylesheet" href="/css/nav-fragment.css">

</head>
<header>
    <nav th:replace="~{fragments/navbar :: nav}"></nav>
</header>
<body>
    <section class="bg-light py-3 py-md-5 py-xl-8">
        <div class="container">
          <div class="row justify-content-md-center">
            <div class="col-12 col-md-10 col-lg-8 col-xl-7 col-xxl-6">
              <h2 class="mb-4 display-5 text-center" th:text="'Bandeja de ordenes de ' + ${session.usuariosession.nombre} + ' ' + ${session.usuariosession.apellido}"></h2>
              <p class="text-secondary text-center lead fs-4 mb-5">Desde aquí puedes ver y modificar tus ordenes</p>
              <hr class="w-50 mx-auto mb-5 mb-xl-9 border-dark-subtle">
            </div>
          </div>
        </div>
      
        <div class="container">
          <div class="row gy-4 gy-lg-0">
            <div class="col-12 col-lg-4 col-xl-3">
              <div class="row gy-4">
                <div class="col-12">
                  <div class="card widget-card border-light shadow-sm">
                    <div class="card-header text-bg-primary" th:text="${'Bienvenido' + ' ' + session.usuariosession.nombre + ' ' + session.usuariosession.apellido}"></div>
                    <div class="card-body">
                      <div class="text-center mb-3">
                        <img th:src="@{/imagen/perfil/{id}(id=${session.usuariosession.id})}" class="img-fluid rounded" th:alt="${session.usuariosession.nombre} + ' ' + ${session.usuariosession.apellido}">
                      </div>
                      <h5 class="text-center mb-1" th:text="${session.usuariosession.nombre} + ' ' + ${session.usuariosession.apellido}"></h5>
                      <p class="text-center text-secondary mb-4" th:text="${session.usuariosession.rol}"></p>
                      
                    </div>
                  </div>
                </div>



                <div class="col-12">
                  <div class="card widget-card border-light shadow-sm">
                    <div class="card-header text-bg-primary">Social Accounts</div>
                    <div class="card-body">
                      <a href="#!" class="d-inline-block bg-dark link-light lh-1 p-2 rounded">
                        <i class="bi bi-youtube"></i>
                      </a>
                      <a href="#!" class="d-inline-block bg-dark link-light lh-1 p-2 rounded">
                        <i class="bi bi-twitter-x"></i>
                      </a>
                      <a href="#!" class="d-inline-block bg-dark link-light lh-1 p-2 rounded">
                        <i class="bi bi-facebook"></i>
                      </a>
                      <a href="#!" class="d-inline-block bg-dark link-light lh-1 p-2 rounded">
                        <i class="bi bi-linkedin"></i>
                      </a>
                    </div>
                  </div>
                </div>
                <div class="col-12" sec:authorize="hasRole('PROVEEDOR') or hasRole('CLIENTEPROVEEDOR')">
                  <div class="card widget-card border-light shadow-sm">
                    <div class="card-header text-bg-primary">Servicios</div>
                    <div class="card-body d-flex flex-wrap">
                     
                        <span class="badge text-bg-primary mr-2 mb-2" th:each="servicio : ${session.usuariosession.servicios}"
                        th:text="${servicio.nombre}"></span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-12 col-lg-8 col-xl-9">
              <div class="card widget-card border-light shadow-sm">
                <div class="card-body p-4">
                  <ul class="nav nav-tabs" id="profileTab" role="tablist">
                    <li class="nav-item" role="presentation">
                      <button class="nav-link active" id="overview-tab" data-bs-toggle="tab" data-bs-target="#overview-tab-pane" type="button" role="tab" aria-controls="overview-tab-pane" aria-selected="true">Ordenes abiertas</button>
                    </li>
                    <li class="nav-item" role="presentation">
                      <button class="nav-link" id="profile-tab" data-bs-toggle="tab" data-bs-target="#profile-tab-pane" type="button" role="tab" aria-controls="profile-tab-pane" aria-selected="false">Trabajos esperando calificacion</button>
                    </li>
                    <li class="nav-item" role="presentation">
                      <button class="nav-link" id="email-tab" data-bs-toggle="tab" data-bs-target="#email-tab-pane" type="button" role="tab" aria-controls="email-tab-pane" aria-selected="false">Ordenes cerradas</button>
                    </li>
                    <li class="nav-item" role="presentation">
                      <button class="nav-link" id="password-tab" data-bs-toggle="tab" data-bs-target="#password-tab-pane" type="button" role="tab" aria-controls="password-tab-pane" aria-selected="false">Calificaciones</button>
                    </li>
                  </ul>
                  <div class="tab-content pt-4" id="profileTabContent">
                    
<!-- ************************************************************************************************************************************************************************************************ -->

                    
                    <!-- Primera pestaña -->
                    <div class="tab-pane fade show active" id="overview-tab-pane" role="tabpanel" aria-labelledby="overview-tab" tabindex="0">
                      <!-- Ordenes Abierto y Presupuestar -->
                      <div id="contenedor-ordenes-presupuestar-cliente" sec:authorize="hasRole('CLIENTE') or hasRole('CLIENTEPROVEEDOR') or hasRole('ADMIN')">
                      <h5 class="mb-3">Ordenes enviadas esperando presupuesto</h5>
                      <table>
                        <thead>
                          <tr>
                            <th scope="col">Titulo</th>
                            <th scope="col">Fecha</th>
                            <th scope="col">Proveedor</th>
                            <th scope="col">Acciones</th>
                          </tr>
                        </thead>
                        <tbody>
                            <tr th:each="ordenAbiertoPresupuestar : ${ordenesAbiertoPresupuestar}">
                              <td th:text="${ordenAbiertoPresupuestar.titulo}"></td>
                              <td></td>
                              <td th:text="${ordenAbiertoPresupuestar.proveedor.nombre}"></td>
                              <td>
                                <button>VER</button>
                              </td>
                            </tr>
                        </tbody>
                      </table>
                      </div>

                      <div id="contenedor-ordenes-presupuestar-proveedor" sec:authorize="hasRole('PROVEEDOR') or hasRole('CLIENTEPROVEEDOR')">
                        <h5 class="mb-3">Ordenes recibidas esperando presupuesto</h5>
                      <table sec:authorize="hasRole('PROVEEDOR') or hasRole('CLIENTEPROVEEDOR')">
                        <thead>
                          <tr>
                            <th scope="col">Titulo</th>
                            <th scope="col">Fecha</th>
                            <th scope="col">Cliente</th>
                            <th scope="col">Acciones</th>
                          </tr>
                        </thead>
                        <tbody>
                         
                        </tbody>
                      </table>
                    </div>

                    <!-- Ordenes Abierto y Presupuestado -->
                    <div id="contenedor-ordenes-presupuestado-cliente"  sec:authorize="hasRole('CLIENTE') or hasRole('CLIENTEPROVEEDOR') or hasRole('ADMIN')">
                      <h5 class="mb-3">Ordenes presupuestadas esperando aprobacion</h5>
                      <table>
                        <thead>
                          <tr>
                            <th scope="col">Titulo</th>
                            <th scope="col">Fecha</th>
                            <th scope="col">Proveedor</th>
                            <th scope="col">Acciones</th>
                          </tr>
                        </thead>
                        <tbody>
                          
                        </tbody>
                      </table>
                      </div>

                      <div id="contenedor-ordenes-presupuestado-proveedor" sec:authorize="hasRole('PROVEEDOR') or hasRole('CLIENTEPROVEEDOR')">
                        <h5 class="mb-3">Ordenes presupuestadas aprobadas</h5>
                      <table>
                        <thead>
                          <tr>
                            <th scope="col">Titulo</th>
                            <th scope="col">Fecha</th>
                            <th scope="col">Cliente</th>
                            <th scope="col">Acciones</th>
                          </tr>
                        </thead>
                        <tbody>
                          
                        </tbody>
                      </table>
                    </div>
                    </div>

<!-- ************************************************************************************************************************************************************************************************ -->

                    <!-- Segunda pestaña -->
                    <div class="tab-pane fade" id="profile-tab-pane" role="tabpanel" aria-labelledby="profile-tab" tabindex="0">
                      <!-- Ordenes esperando calificacion -->
                      <div id="contenedor-ordenes-calificar-cliente" sec:authorize="hasRole('CLIENTE') or hasRole('CLIENTEPROVEEDOR') or hasRole('ADMIN')">
                        <h5 class="mb-3">Trabajos para calificar</h5>
                        <table>
                          <thead>
                            <tr>
                              <th scope="col">Titulo</th>
                              <th scope="col">Fecha</th>
                              <th scope="col">Proveedor</th>
                              <th scope="col">Acciones</th>
                            </tr>
                          </thead>
                          <tbody>
                              
                          </tbody>
                        </table>
                        </div>
  
                        <div id="contenedor-ordenes-calificar-proveedor" sec:authorize="hasRole('PROVEEDOR') or hasRole('CLIENTEPROVEEDOR')">
                          <h5 class="mb-3">Trabajos esperando calificacion</h5>
                        <table sec:authorize="hasRole('PROVEEDOR') or hasRole('CLIENTEPROVEEDOR')">
                          <thead>
                            <tr>
                              <th scope="col">Titulo</th>
                              <th scope="col">Fecha</th>
                              <th scope="col">Cliente</th>
                              <th scope="col">Acciones</th>
                            </tr>
                          </thead>
                          <tbody>
                           
                          </tbody>
                        </table>
                      </div>
  
                    </div>

<!-- ************************************************************************************************************************************************************************************************ -->



                    <!-- Tercera pestaña -->
                    <div class="tab-pane fade" id="email-tab-pane" role="tabpanel" aria-labelledby="email-tab" tabindex="0">
                     
                      
                  </div>


<!-- ************************************************************************************************************************************************************************************************ -->



                    <!-- Cuarta pestaña -->
                    <div class="tab-pane fade" id="password-tab-pane" role="tabpanel" aria-labelledby="password-tab" tabindex="0">
                      
                    </div>



                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      
      </section>
      <script src="https://unpkg.com/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>